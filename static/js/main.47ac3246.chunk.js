(this["webpackJsonpalfa-cards"]=this["webpackJsonpalfa-cards"]||[]).push([[0],{20:function(t,e,r){},27:function(t,e,r){"use strict";r.r(e);var a=r(0),n=r.n(a),i=r(10),c=r.n(i),s=(r(20),r(11)),o=r(4),d=r.n(o),l=r(6),u=r(3),p=r(5);function h(t){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(d.a.mark((function t(e){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,a=null,t.prev=1,t.next=4,fetch(e.url,e);case 4:r=t.sent,t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(1),new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430");case 10:return t.prev=10,t.next=13,r.json();case 13:a=t.sent,t.next=19;break;case 16:throw t.prev=16,t.t1=t.catch(10),new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");case 19:if(r.ok){t.next=21;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430");case 21:return console.log("API:",a),t.abrupt("return",a);case 23:case"end":return t.stop()}}),t,null,[[1,7],[10,16]])})))).apply(this,arguments)}var f={"Content-Type":"application/json",Accept:"*/*"},j=new(function(){function t(){Object(u.a)(this,t)}return Object(p.a)(t,[{key:"generateUrl",value:function(t){return"https://rickandmortyapi.com/api/character/".concat(t)}},{key:"getRickAndMorty",value:function(){var t=Object(l.a)(d.a.mark((function t(e){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({url:this.generateUrl(e),method:"GET",headers:f});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}()),O=r(8),_=r(7);var v=r(1),C=function(t){Object(O.a)(r,t);var e=Object(_.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(p.a)(r,[{key:"addDog",value:function(){var t,e,r=(t=1,e=671,Math.floor(Math.random()*(e-t+1))+t);this.props.dispatch(k.getCard(r))}},{key:"changeFilter",value:function(){this.props.dispatch(k.changeFilterState(!this.props.filter))}},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{className:"sidebar",children:[Object(v.jsxs)("div",{className:"sidebar__filter",children:[Object(v.jsx)("h5",{className:"filter__title",children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"}),Object(v.jsx)("input",{className:"filter-input",id:"checkbox",type:"checkbox"}),Object(v.jsx)("label",{onClick:function(){return t.changeFilter()},className:"filter-label",htmlFor:"checkbox"})]}),Object(v.jsx)("button",{className:"sidebar__btn",onClick:function(){return t.addDog()},children:this.props.loading?"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u044e...":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"})]})}}]),r}(n.a.PureComponent),E=r(2),m={filter:!1,loading:!1};var k=new function t(){var e=this;Object(u.a)(this,t),this.GET_CARD="GET_CARD",this.GET_CARD_OK="GET_CARD_OK",this.GET_CARD_ERROR="GET_CARD_ERROR",this.CHANGE_FILTER_STATE="CHANGE_FILTER_STATE",this.changeFilterState=function(t){return{type:e.CHANGE_FILTER_STATE,payload:t}},this.getCard=function(t){return function(){var r=Object(l.a)(d.a.mark((function r(a){var n;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=function(t){return{image:t.image,liked:!1,id:t.id}},a({type:e.GET_CARD}),r.prev=2,r.t0=a,r.t1=e.GET_CARD_OK,r.t2=n,r.next=8,j.getRickAndMorty(t);case 8:r.t3=r.sent,r.t4=(0,r.t2)(r.t3),r.t5={type:r.t1,payload:r.t4},(0,r.t0)(r.t5),r.next=17;break;case 14:r.prev=14,r.t6=r.catch(2),a({type:e.GET_CARD_ERROR,payload:r.t6});case 17:case"end":return r.stop()}}),r,null,[[2,14]])})));return function(t){return r.apply(this,arguments)}}()}},g=r(15),L=function(t){Object(O.a)(r,t);var e=Object(_.a)(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(p.a)(r,[{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"card__body",children:Object(v.jsx)("img",{className:"card__img",src:this.props.image,alt:"Rick&Morty"})}),Object(v.jsxs)("div",{className:"card__footer",children:[Object(v.jsx)("button",{className:"card__btn_delete",onClick:function(){t.props.onDeleteCard({image:t.props.image,liked:!t.props.liked,id:t.props.id})},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(v.jsx)("button",{onClick:function(){t.props.onChangeLikeCard({image:t.props.image,liked:!t.props.liked,id:t.props.id})},className:"card__btn_like ".concat(this.props.liked?"card__btn_like-active":"")})]})]})}}]),r}(n.a.PureComponent),y=function(t){Object(O.a)(r,t);var e=Object(_.a)(r);function r(t){var a;return Object(u.a)(this,r),(a=e.call(this,t)).initialState={cardList:[]},a.onChangeLikeCard=function(t){a.props.dispatch(D.onChangeLikeCard(t))},a.onDeleteCard=function(t){a.props.dispatch(D.onDeleteCard(t))},a.state=Object(E.a)({},a.initialState),a}return Object(p.a)(r,[{key:"componentDidMount",value:function(){this.setState({cardList:this.props.cardList})}},{key:"componentDidUpdate",value:function(t){t.filter||!this.props.filter?!t.filter||this.props.filter?t.cardList!==this.props.cardList&&this.props.filter?this.setState({cardList:this.filter()}):t.cardList===this.props.cardList||this.props.filter||this.setState({cardList:this.props.cardList}):this.setState({cardList:this.props.cardList}):this.setState({cardList:this.filter()})}},{key:"filter",value:function(){return this.props.cardList.filter((function(t){return!0===t.liked}))}},{key:"render",value:function(){var t=this;return this.props.cardList.length<1?Object(v.jsx)("div",{className:"card-list_no-content",children:Object(v.jsx)("h2",{className:"card-list__title",children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 :)"})}):this.props.cardList.length>0&&this.state.cardList.length<1?Object(v.jsx)("div",{className:"card-list_no-content",children:Object(v.jsx)("h2",{className:"card-list__title",children:"\u041b\u0430\u0439\u043a\u043d\u0438\u0442\u0435 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0432\u0448\u0443\u044e\u0441\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443!"})}):Object(v.jsx)("div",{className:"card-list",children:this.state.cardList.map((function(e){return Object(v.jsx)(L,{image:e.image,liked:e.liked,id:e.id,onChangeLikeCard:t.onChangeLikeCard,onDeleteCard:t.onDeleteCard},e.id)}))})}}]),r}(n.a.PureComponent),R={cardList:[],filter:!1};function A(t,e){var r=t.cardList.map((function(t){return t.id===e.id?(t.liked=e.liked,t):t}));return Object(E.a)(Object(E.a)({},t),{},{cardList:r})}function x(t,e){var r=t.cardList.filter((function(t){return t.id!==e.id}));return Object(E.a)(Object(E.a)({},t),{},{cardList:r})}var D=new function t(){var e=this;Object(u.a)(this,t),this.CHANGE_LIKE_CARD="CHANGE_LIKE_CARD",this.DELETE_CARD="DELETE_CARD",this.onChangeLikeCard=function(t){return{type:e.CHANGE_LIKE_CARD,payload:t}},this.onDeleteCard=function(t){return{type:e.DELETE_CARD,payload:t}}};var T=Object(s.b)({sidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k.CHANGE_FILTER_STATE:return Object(E.a)(Object(E.a)({},t),{},{filter:e.payload});case k.GET_CARD:return Object(E.a)(Object(E.a)({},t),{},{loading:!0});case k.GET_CARD_OK:case k.GET_CARD_ERROR:return Object(E.a)(Object(E.a)({},t),{},{loading:!1});default:return Object(E.a)({},t)}},cardList:function(t,e){switch(e.type){case k.GET_CARD_OK:return function(t,e){if(t.cardList.find((function(t){return t.id===e.id})))return Object(E.a)({},t);var r=Object(g.a)(t.cardList);return r.push(e),Object(E.a)(Object(E.a)({},t),{},{cardList:r})}(t,e.payload);default:return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case D.CHANGE_LIKE_CARD:return A(t,e.payload);case D.DELETE_CARD:return x(t,e.payload);default:return Object(E.a)({},t)}}(t,e)}}}),N=r(9),G=Object(N.b)((function(t){return Object(E.a)({},t.sidebar)}))(C),w=Object(N.b)((function(t){return Object(E.a)(Object(E.a)({},t.cardList),{},{filter:t.sidebar.filter})}))(y);var S=Object(s.a)((function(t){var e=t.dispatch,r=t.getState;return function(t){return function(a){return a instanceof Function?a(e,r):t(a)}}}))(s.c)(T);console.log(S.getState()),document.getElementById("sidebar")&&c.a.render(Object(v.jsx)(N.a,{store:S,children:Object(v.jsx)(G,{})}),document.getElementById("sidebar")),document.getElementById("card-list")&&c.a.render(Object(v.jsx)(N.a,{store:S,children:Object(v.jsx)(w,{})}),document.getElementById("card-list"))}},[[27,1,2]]]);
//# sourceMappingURL=main.47ac3246.chunk.js.map